<!doctype html>
<html lang="pt-br"  xmlns="http://thymeleaf.org"
                    xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="../css/index.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <script src="https://igorescobar.github.io/jQuery-Mask-Plugin/js/jquery.mask.min.js"></script>  
    <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/themes/smoothness/jquery-ui.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
    <title>FarmaCia</title>

    <link rel="apple-touch-icon" sizes="180x180" href="../assets/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../assets/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../assets/favicon-16x16.png">
    <link rel="manifest" href="../assets/site.webmanifest">
    <link rel="mask-icon" href="../assets/safari-pinned-tab.svg" color="#5bbad5">
    <link rel="shortcut icon" href="../assets/favicon.ico">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="assets/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">

    <script>
        $('.valorEmReais').mask('#.###,##', {reverse: true});      
    </script>

  </head>
  <body style="min-width:372px;">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    <nav id="topo" class="navbar navbar-expand-lg navbar-dark bg-primary border-bottom shadow-sm mb-3 col-12">
        <div class="container col-8 col-sm-8 col-md-8 col-lg-11 col-xl-11">        
            <button class="navbar-toggler ml-1" type="button" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="navbar-toggler-icon"></span>
            </button>
            <a class="navbar-brand mr-auto" href="/">
                <img src="../assets/logo1.png" width="30" height="30" class="d-inline-block align-top" alt="">
                <strong>FarmaCia
            </a>
            <div class="navbar-collapse collapse">
                <ul class="navbar-nav flex-grow-1">
                    <li class=nav-item>
                        <a class="nav-link text-light" th:href="@{'/page/' + ${1}} + '?sortField=' + ${3}">Medicamentos</a>
                    </li>
                    <li class=nav-item>
                        <a href="/Cosmeticos" class="nav-link text-light">Cosméticos</a>
                    </li>
                    <li class=nav-item>
                        <a class="nav-link text-light" th:href="@{'/page/' + ${1}} + '?sortField=' + ${4}">Higíene</a>
                    </li>                    
                    <li class=nav-item>
                        <a href="/Infantil" class="nav-link text-light" th:href="@{'/page/' + ${1}} + '?sortField=' + ${5}">Infantil</a>
                    </li>      
                    <li class=nav-item>
                        <a class="nav-link text-light">|</a>
                    </li>            
                </ul>
                <div class="align-self-end">
                    <ul class="navbar-nav">
                        <li class=nav-item>
                            <a href="/cadastrarUsuario" class="nav-link text-light">Cadastrar</a>
                        </li>
                        <li class=nav-item>
                            <a href="" class="nav-link text-light">Entrar</a>
                        </li>                      
                    </ul>
                </div>
            </div>
        </div>
        <a id="cartIcon" href="#" class="nav-link text-white mr-2">
            <svg class="bi" width="24" height="24" fill="currentColor">
                <use xlink:href="../assets/bi.svg#cart3"/>
            </svg>
        </a>    
    </nav>

    <header>
        <section id="home">
            <div class="container-fluid">
                <div class="row">
                    <div id="painel" class="col-sm-12 ml-auto d-none d-lg-block">
                        <div id="carousel-indicadores" class="carousel slide" data-ride="carousel">
                            <!-- Indicadores -->
                            <ol class="carousel-indicators">
                                <li class="active" data-target="#carousel-indicadores" data-slide-to="0"></li>
                                <li data-target="#carousel-indicadores" data-slide-to="1"></li>
                            </ol>
                            <!-- Inner -->
                            <div id="carousel" class="carousel-inner">
                                <div class="carousel-item active">
                                    <img src="../assets/img1.png" class="img-fluid">
                                </div>

                                <div class="carousel-item">
                                    <img src="../assets/img2.png" class="img-fluid">
                                </div>
                            </div>
                            <!--Controles-->
                            <a href="#carousel-indicadores" class="carousel-control-prev" data-slide="next">
                                <span class="carousel-control-prev-icon"></span>
                            </a>

                            <a href="#carousel-indicadores" class="carousel-control-next" data-slide="next">
                                <span class="carousel-control-next-icon"></span>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </header>
    
    <main>
        <div class="container">
            <div class="row">
                <div class="col-12 col-md-5">
                    <form class="justify-content-center justify-content-md-start mt-1 mb-3 mb-md-0">
                        <div class="input-group input-group-sm">
                            <input style="height:38px;" type="text" class="form-control" placeholder="Buscar...">
                            <button class="btn btn-primary">
                                Buscar
                            </button>
                        </div>
                    </form>
                </div>
                <div class="mt-1 col-12 col-md-7">
                    <div class="d-flex flex-row-reverse justify-content-center justify-content-md-start">            
                        <div>      
                            <nav class="d-inline-block">
                                <ul class="pagination pagination-sm my-0">
                                    <li class="page-item">
                                        <a class="page-link" th:if="${currentPage > 1}" th:href="@{'/page/' + ${1}} + '?sortField=' + ${sortField}">Primeira</a>
                                        <span class="page-link" th:unless="${currentPage > 1}">Primeira</span>
                                    </li>   
                                    
                                    <li th:each="i: ${#numbers.sequence(1, totalPages)}">
                                        <a class="page-link" th:if="${currentPage != i}" th:href="@{'/page/' + ${i}} + '?sortField=' + ${sortField}">[[${i}]]</a>
                                        <span class="page-link" th:unless="${i != currentPage}">[[${i}]]</span>
                                    </li>
                                    
                                    <li class="page-item">
                                        <a class="page-link" th:if="${currentPage < totalPages}" th:href="@{'/page/' + ${totalPages}} + '?sortField=' + ${sortField}">Ultima</a>
                                        <span class="page-link" th:unless="${currentPage < totalPages}">Ultima</span>
                                    </li>
                                </ul>
                            </nav>      
                        </div>      
                    </div>
                </div>
            </div>
            <hr class="mt-3">
            <script>
                function produtoSelecionado(id) {

                    document.getElementById('id').value = id;

                    document.forms['prodSelecionado'].submit();
                }

                function botaoAddProduto(iden) {
                    document.getElementById('idAddCarrinho').value = iden;
                    
                    $(function(){
                        var obj = document.getElementById('addProduto');

                        var form = $(obj);

                        var dados = new FormData(obj);
                        $.ajax({
                            url: form.attr('action'),
                            type: form.attr('method'),
                            dataType: "text",
                            data: dados,
                            processData: false,
                            cache: false,
                            contentType: false,
                            success: function (data) {
                                alert('Produto adicionado a cesta');
                            }
                        });
                    });
                }
            </script>
            <div class="row">                              
                <div th:each="produto : ${listaProdutos}" id="produto" class="d-flex align-items-stretch mt-2 col-6 col-sm-6 col-md-4 col-lg-3 col-xl-2">
                    <div class="card text-center bg-light">
                        <div class="button1" onclick="produtoSelecionado()">                     
                        <img id="imagemProduto" th:src="'../assets/' + ${produto.imagem}" class="card-img-top">
                        <input type="hidden" id="valorDoInput" th:value="${produto.imagem}">
                        

                        <div style="height:60px;" class="card-header">
                            <p style="margin:-10px;font-size:12px;" class="card-text text-left mt-1" th:text="${produto.descricao}"></p>
                        </div>
                        <div style="margin-top:-15px;margin-left:-15px;height:60px;" class="card-body">
                            <h1 class="valorEmReais text-left" type="text" id="preco" name="valorEmReais" style="font-size:16px;text-decoration:line-through" th:text="${produto.preco}"></h1>
                            <h1 class="valorEmReais text-left" type="text" id="precoPromocional" name="valorEmReais" style="font-size:18px;margin-top:-10px;" th:text="${produto.precoPromocional}"></h1>                       
                        </div>
                        </div>
                        <div style="height:60px;" class="card-footer">
                            
                                <button onclick="" type="submit" class="btn btn-primary btn-block">Comprar</button>                              
                        </div>
                    </div>
                </div>
                <form id="prodSelecionado" name="prodSelecionado" action="/produto" method="post">
                    <input type="hidden" id="id" name="id" class="form-control" value="">
                    <input type="hidden" id="quantidade" name="quantidade" class="form-control" value="">
                </form>

                <form id="addProduto" href="index" name="addProduto" action="/addCarrinho" method="post">
                    <input type="hidden" id="idAddCarrinho" name="id" class="form-control" value="">
                    <input type="hidden" id="quantidadeAddCarrinho" name="quantidade" class="form-control" value="1">
                </form>
            </div>
            <hr class="mt-3">
        <div>
    </main>

    <footer class="border-top text-muted bg-dark mt-2">
        <div id="rodape" class="container col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12">
            <div id="footer" class="row py-3 col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12">
                <ul id="lista" class="list-inline col-6 col-sm-6 col-md-6 col-lg-6 col-xl-6">
                    <li>
                        <a href="" class="list-inline-item text-muted text-nowrap">Formas de Pagamento</a>
                    </li>
                    <li>
                        <a href="" class="list-inline-item text-muted">Vacinas</a>
                    </li>
                    <li>
                        <a href="" class="list-inline-item text-muted text-nowrap">Nossa História</a>
                    </li>
                    <li>
                        <a href="/cadastrarProduto" class="list-inline-item text-muted text-nowrap">Area do Administrador</a>
                    </li>
                </ul>
                <div id="redesSociais" class="text-center text-nowrap col-6 col-sm-6 col-md-6 col-lg-6 col-xl-6">
                    <h5>Redes Sociais</h5>
                    <i class="fab fa-facebook fa-2x"></i>
                    <i class="fab fa-instagram fa-2x"></i>
                    <i class="fab fa-twitter-square fa-2x"></i>
                </div>              
            </div>
        </div>
    </footer>
    <script src="https://code.jquery.com/jquery-3.4.1.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
  </body>
</html>